# Telegram Bot — Анонимный обмен сообщениями

Это Telegram‑бот для **анонимного обмена сообщениями**. Пользователи могут отправлять и получать сообщения, сохраняя полную конфиденциальность.  

При первом взаимодействии бот автоматически регистрирует пользователя в базе данных SQLite и присваивает уникальный идентификатор.  
Отправка сообщений возможна только тем пользователям, которые также ранее писали боту.

---

## Функционал

- Автоматическая регистрация пользователя при первом `/start`
- Отправка анонимных сообщений любому зарегистрированному пользователю
- Поиск получателя по нику (`@username`)
- Получение входящих анонимных сообщений
- Пролистывание сообщений по одному
- Автоматическое удаление сообщений после прочтения для приватности
- Меню и кнопки с использованием встроенных клавиатур

---

## Технологический стек

- **Python 3.11+**
- **[Aiogram 3](https://docs.aiogram.dev/)** — асинхронный фреймворк для Telegram‑ботов  
- **[SQLAlchemy 2.0 async](https://docs.sqlalchemy.org/)** — ORM и работа с БД  
- **SQLite + aiosqlite** — база данных  
- **FSM (Finite State Machine)** из aiogram для управления диалогом  

---

## Структура проекта
```
app/
├── main.py # Точка входа в приложение
├── handlers.py # Хендлеры команд и состояний бота
├── keyboards.py # Inline и Reply клавиатуры
└── database/
├── models.py # ORM-модели SQLAlchemy
└── requests.py # CRUD-запросы к базе данных
```

---

## Установка и запуск

1. Клонируйте проект:
```   
git clone https://github.com/<your-repo>/anon-messages-bot.git
cd anon-messages-bot
```

2. Создайте виртуальное окружение и установите зависимости:
```  
python -m venv venv
source venv/bin/activate # Linux/macOS
venv\Scripts\activate # Windows
pip install -r requirements.txt
```

3. Установите токен бота от BotFather в переменной окружения или замените в `main.py`:
  
export BOT_TOKEN="ваш_токен"


4. Запустите бота:
  
python -m app.main

---

## Основные команды

- `/start` — регистрация и приветствие  
- `Отправить сообщение` — ввод ника получателя и текста сообщения  
- `Прочитать сообщение` — просмотр входящих сообщений  
- `Показать ещё сообщения` — вывод следующих непрочитанных  

---

## Работа с базой данных

- При первом запуске создаётся файл SQLite `db.sqlite3`
- Таблицы:
```
  `users` — пользователи (Telegram ID, username)
  `messages` — сообщения (текст, id отправителя, id получателя)
```
- Сообщения удаляются после того, как получатель их прочитал.

---

## Возможные улучшения

- Поддержка медиа (фото, стикеры, документы)  
- Возможность ответить анонимно на сообщение  
- Docker‑образ для быстрого деплоя  
- Админ‑панель для модерации  

---

## Лицензия

MIT License © 2025
